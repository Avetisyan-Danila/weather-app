import{_ as w,r,w as v,H as g,u as V,N as C,a as S,f as F,d as I,i,j as n,q as N,k as u,J as x,F as b,A as L,y as k,l as W,s as _,v as A,T as B}from"./index-9eb2d130.js";import{A as E,C as M}from"./CityCard-be51411f.js";import{c as T}from"./capitalizeFirstLetter-56b907fd.js";const j={class:"favorites"},q=["onSubmit"],z={key:0,class:"favorites__list"},D={class:"favorites__item"},H={__name:"FavoritesView",setup(J){const l=r(!0),e=r(""),s=r("");v(e,()=>{l.value=!0});const h=g(),c=V(),d=C(),p=async()=>{if(!e.value){l.value=!1,s.value="";return}try{await c.setCityWeather(e.value,7),s.value="",await h.push({name:"detailed",params:{city:e.value}})}catch{s.value="Couldn`t find the city"}},o=r([]);S(async()=>{for(const t of d.favorites)await c.setCityWeather(t,1),o.value.push(c.getCityWeather(t,1))});const f=F(),y=I(()=>o.value.length!==d.favorites.length);return v(y,t=>{f.setLoadingIndicator(t)},{immediate:!0}),(t,m)=>(i(),n("div",j,[N("form",{class:"favorites__form",action:"#",onSubmit:x(p,["prevent"])},[u(E,{type:"text",name:"favorite",placeholder:"Name of the city",modelValue:e.value,"onUpdate:modelValue":m[0]||(m[0]=a=>e.value=a),"is-valid":l.value,"empty-error-message":"Enter the name of the city","search-error-message":s.value},null,8,["modelValue","is-valid","search-error-message"])],40,q),o.value.length?(i(),n("ul",z,[(i(!0),n(b,null,L(o.value,a=>(i(),n("li",D,[u(B,{name:"list",appear:""},{default:W(()=>[u(M,{to:{name:"detailed",params:{city:a.location.name}},title:a.location.name,weatherIcon:a.currentDayIcon,weatherName:_(T)(_(A)[a.current.condition.code])},null,8,["to","title","weatherIcon","weatherName"])]),_:2},1024)]))),256))])):k("",!0)]))}},G=w(H,[["__scopeId","data-v-58b9daa2"]]);export{G as default};
