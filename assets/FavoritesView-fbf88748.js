import{_ as g,r,w as v,u as S,a as V,b as C,x as F,o as I,c as x,d as b,e as i,f as n,g as N,i as u,h as L,F as k,n as W,q as B,k as E,j as h,p as R,T as A}from"./main-41216a8c.js";import{A as M,C as T}from"./CityCard-2fb49ce7.js";import{c as j}from"./capitalizeFirstLetter-56b907fd.js";const q={class:"favorites"},z=["onSubmit"],D={key:0,class:"favorites__list"},P={class:"favorites__item"},U={__name:"FavoritesView",setup(G){const c=r(!0),e=r(""),s=r("");v(e,()=>{c.value=!0});const _=S(),l=V(),p=C(),d=F(),f=async()=>{if(!e.value){c.value=!1,s.value="";return}try{await l.setCityWeather(e.value,7),p.setRecentSearch(e.value),s.value="",await _.push({name:"detailed",params:{city:e.value}})}catch{s.value="Couldn`t find the city"}},o=r([]);I(async()=>{for(const t of d.favorites)await l.setCityWeather(t,1),o.value.push(l.getCityWeather(t,1))});const y=x(),w=b(()=>o.value.length!==d.favorites.length);return v(w,t=>{y.setLoadingIndicator(t)},{immediate:!0}),(t,m)=>(i(),n("div",q,[N("form",{class:"favorites__form",action:"#",onSubmit:L(f,["prevent"])},[u(M,{type:"text",name:"favorite",placeholder:"Name of the city",modelValue:e.value,"onUpdate:modelValue":m[0]||(m[0]=a=>e.value=a),"is-valid":c.value,"empty-error-message":"Enter the name of the city","search-error-message":s.value},null,8,["modelValue","is-valid","search-error-message"])],40,z),o.value.length?(i(),n("ul",D,[(i(!0),n(k,null,W(o.value,a=>(i(),n("li",P,[u(A,{name:"list",appear:""},{default:E(()=>[u(T,{to:{name:"detailed",params:{city:a.location.name}},title:a.location.name,weatherIcon:a.currentDayIcon,weatherName:h(j)(h(R)[a.current.condition.code])},null,8,["to","title","weatherIcon","weatherName"])]),_:2},1024)]))),256))])):B("",!0)]))}},O=g(U,[["__scopeId","data-v-66c46eab"]]);export{O as default};
